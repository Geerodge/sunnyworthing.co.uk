<script type="application/javascript">

    {{# Handle contact submit #}}
    const handleSubmit = e => {
        const encode = (data) => {
            return Object.keys(data)
                .map(key => encodeURIComponent(key) + "=" + encodeURIComponent(data[key]))
                .join("&");
        }
        fetch("/", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: encode({ "form-name": "subscribe", ...this.state })
        })
            .then(() => alert("Success!"))
            .catch(error => alert(error));
        e.preventDefault();
    };

    {{# Success message #}}
    if ( window.location.search.includes("success=true") ) {
        alert("Subscription successful ðŸ¥³");
    };
</script>
{{ if template === "default" }}
    {{ asset:image }}
        <section class="hero" style="background-image: url( '{{ url }}' );
            background-size: cover;
            background-position: {{ focus_css  }};"
        >
    {{ /asset:image }}
{{ else }}
    {{ asset:image }}
        <section class="hero" style="background-image: url( '{{ url }}' );
            background-size: cover;
            background-position: {{ focus_css  }};"
        >
    {{ /asset:image }}
{{ /if }}
    <div class="hero__container {{ image ? "text-brand-white" : "text-brand-primary" }} ">
        <div class="hero__inner">
            <div class="hero__text-container">
                {{ if pretextarea }}
                    <p class="p p-base hero__pre-text">
                        {{ pretextarea }}
                    </p>
                {{ /if }}
                <h1 class="hero__heading">
                    {{ heading }}
                </h1>
                {{ if textarea }}
                    <p class="p p-base hero__post-text">
                        {{ textarea }}
                    </p>
                {{ /if }}
            </div>
            <div class="hero__form">
                <form 
                    method="POST"
                    action="/?success=true"
                    data-netlify="true"
                    netlify-honeypot="bot-field"
                    id="subscribe"
                    name="subscribe"
                    onsubmit="{handleSubmit}">
                    <input type="email" name="email_address" value="" placeholder="Enter email address" required="">
                    <button class="btn small btn--primary" type="submit"><span class="hidden-phone">Subscribe now</span></button>
                </form>
            </div>
            </div>
        </div>
    </div>
</section>
